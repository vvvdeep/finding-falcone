"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[379],{379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a,i=n(378),o=n(719);!function(e){e.Destination1="Destination1",e.Destination2="Destination2",e.Destination3="Destination3",e.Destination4="Destination4"}(a||(a={}));const l=(e,t,n)=>{const a=new Map(e);return a.set(t,n),a},s=(e,t,n,a)=>[...e.entries()].reduce(((e,[i,o])=>{const l=n[o].distance,s=t.get(i);return l&&s?e+l/a[s].speed:e}),0),r=(e,t)=>0===Object.values(a).filter((n=>!e.has(n)||!t.has(n))).length,c=(e,t)=>e.reduce(((e,n)=>(e[n[t]]=n,e)),{});var d=n(282);const u=(e,t)=>[...t.values()].reduce(((t,n)=>n===e?t+1:t),0);var p=n(246);const m=(0,o.QM)({autoCompleteWrapper:{position:"relative",marginBottom:"1rem"},input:{marginBottom:0},optionsList:{position:"absolute",zIndex:"var(--autoCompleteZIndex)",width:"100%",listStyle:"none",boxShadow:"var(--box-shadow-down)"},optionsListItem:{backgroundColor:"white",margin:0,borderBottom:"1px solid #e6e6e6",padding:"0.5rem",cursor:"pointer","&:last-child":{borderBottom:"none"},"&:hover":{backgroundColor:"#dedede"}},noOptionsListItem:{backgroundColor:"white",margin:0,padding:"0.5rem"}}),h=e=>{const{id:t,labelText:n,inputValueProp:a,options:o,onSelect:l}=e,s=m(),r=(0,i.useRef)(null),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(a||""),[v,x]=(0,i.useState)(o),[b,g]=(0,i.useState)(null),f=e=>{var t;(null===(t=r.current)||void 0===t?void 0:t.contains(e.target))||(d(!1),h((null==b?void 0:b.label)||""))};return(0,i.useEffect)((()=>{x(""===u?o:o.filter((({label:e})=>e.toLowerCase().includes(u.toLowerCase()))))}),[u,o]),(0,i.useEffect)((()=>{h(a||""),a||g(null)}),[a]),(0,i.useEffect)((()=>(c?document.addEventListener("mousedown",f):document.removeEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)})),[c]),(0,p.jsxs)("div",{className:s.autoCompleteWrapper,ref:r,children:[(0,p.jsx)("label",{htmlFor:t,children:n}),(0,p.jsx)("input",{id:t,type:"text",placeholder:"Type to search",className:s.input,value:u,onChange:e=>{h(e.target.value),d(!0)},onFocus:()=>{d(!0)}}),c&&(0,p.jsx)(p.Fragment,{children:0===v.length?(0,p.jsx)("ul",{className:s.optionsList,children:(0,p.jsx)("li",{className:s.noOptionsListItem,children:"No matches"})}):(0,p.jsx)("ul",{className:s.optionsList,children:v.map((e=>(0,p.jsx)("li",{role:"option","aria-selected":u===e.label,className:s.optionsListItem,onClick:()=>{return h((t=e).label),g(t),d(!1),x([]),void l(t);var t},children:e.label},e.value)))})})]})},v=(0,o.QM)({radioWrapper:{display:"flex",gap:"1rem"},vehiclesBox:{margin:"1rem 0.5rem 2rem",padding:"1rem",border:"1px solid var(--primary-color)",borderRadius:"2rem",position:"relative","&::before":{border:"1rem solid var(--primary-color)",content:'" "',position:"absolute",top:"-2rem",left:"8rem",borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent"}},disabledLabel:{color:"lightgray"}}),x=e=>{const{destinationType:t,planetOptions:n,vehicleOptions:i,selectedPlanetValue:o,vehicleSelection:l,onPlanetSelect:s,onVehicleChange:r}=e,c=v(),{id:d,text:m}=(e=>{switch(e){case a.Destination1:return{id:"destination1",text:"Destination 1"};case a.Destination2:return{id:"destination2",text:"Destination 2"};case a.Destination3:return{id:"destination3",text:"Destination 3"};case a.Destination4:return{id:"destination4",text:"Destination 4"};default:return{id:"NEVER",text:"NEVER"}}})(t);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h,{id:`${d}-select`,labelText:m,inputValueProp:o,options:n,onSelect:s}),o&&(0,p.jsx)("div",{className:c.vehiclesBox,children:i.map((e=>(0,p.jsxs)("div",{className:c.radioWrapper,children:[(0,p.jsx)("input",{type:"radio",id:`${d}-radio-${e.value}`,name:`${d}-vehicle-radio`,value:e.value,disabled:!e.isSelectable,checked:l.get(t)===e.value,onChange:()=>r(e)}),(0,p.jsxs)("label",{htmlFor:`${d}-radio-${e.value}`,className:e.isSelectable?"":c.disabledLabel,children:[e.name," (",e.total_no-u(e.value,l),")"]})]},e.value)))})]})},b=(0,o.QM)({timeTaken:{marginTop:"3rem"},findButtonWrapper:{textAlign:"center",marginTop:"5rem"}}),g=e=>{const{searching:t,planetOptions:n,vehicleOptions:o,planetSelection:u,vehicleSelection:m,updatePlanetSelection:h,updateVehicleSelection:v,findFalcone:g}=e,f=b(),[S,j]=(0,i.useState)(n);(0,i.useEffect)((()=>{const e=new Set(u.values());j(n.filter((t=>!e.has(t.value))))}),[u]);const C=c(n,"value"),w=c(o,"value"),N=(e=>t=>{const{vehicleOption:n,destinationType:a,planetSelection:i,vehicleSelection:o}=t,l=i.get(a);if(l&&e[l].distance>n.max_distance)return!1;let s=0;return[...o.values()].forEach((e=>{e===n.value&&(s+=1)})),!(s>=n.total_no)})(C);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"row",children:[Object.values(a).map((e=>(0,p.jsx)("div",{className:"column",children:(0,p.jsx)(x,{destinationType:e,planetOptions:S,vehicleOptions:o.map((t=>({...t,isSelectable:N({vehicleOption:t,destinationType:e,planetSelection:u,vehicleSelection:m})}))),selectedPlanetValue:u.get(e),vehicleSelection:m,onPlanetSelect:t=>{h(l(u,e,t.value)),v(((e,t)=>{const n=new Map(e);return n.delete(t),n})(m,e))},onVehicleChange:t=>v(l(m,e,t.value))})},e))),(0,p.jsx)("div",{className:"column",children:(0,p.jsxs)("h3",{className:f.timeTaken,children:["Time taken: ",s(u,m,C,w)]})})]}),(0,p.jsx)("div",{className:f.findButtonWrapper,children:(0,p.jsx)("button",{disabled:!r(u,m),onClick:()=>g({planet_names:[...u.values()],vehicle_names:[...m.values()].map((e=>w[e].name))}),children:"Find Falcone!"})}),t&&(0,p.jsx)(d.Z,{loadingText:"Searching..."})]})}}}]);