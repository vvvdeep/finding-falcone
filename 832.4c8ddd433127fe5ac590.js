"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[832],{832:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a,l=n(378),o=n(719);!function(e){e.Destination1="Destination1",e.Destination2="Destination2",e.Destination3="Destination3",e.Destination4="Destination4"}(a||(a={}));const i=(e,t,n)=>{const a=new Map(e);return a.set(t,n),a},r=(e,t)=>0===Object.values(a).filter((n=>!e.has(n)||!t.has(n))).length,s=(e,t)=>e.reduce(((e,n)=>(e[n[t]]=n,e)),{});var c=n(282);const d=(0,o.QM)({autoCompleteWrapper:{position:"relative",marginBottom:"1rem"},input:{marginBottom:0},optionsList:{position:"absolute",zIndex:"var(--autoCompleteZIndex)",width:"100%",listStyle:"none",boxShadow:"var(--box-shadow-down)"},optionsListItem:{backgroundColor:"white",margin:0,borderBottom:"1px solid #e6e6e6",padding:"0.5rem",cursor:"pointer","&:last-child":{borderBottom:"none"},"&:hover":{backgroundColor:"#dedede"}},noOptionsListItem:{backgroundColor:"white",margin:0,padding:"0.5rem"}}),u=e=>{const{id:t,labelText:n,inputValueProp:a,options:o,onSelect:i}=e,r=d(),s=(0,l.useRef)(null),[c,u]=(0,l.useState)(!1),[m,p]=(0,l.useState)(a||""),[v,h]=(0,l.useState)(o),[b,g]=(0,l.useState)(null),E=e=>{var t;(null===(t=s.current)||void 0===t?void 0:t.contains(e.target))||(u(!1),p((null==b?void 0:b.label)||""))};return(0,l.useEffect)((()=>{h(""===m?o:o.filter((({label:e})=>e.toLowerCase().includes(m.toLowerCase()))))}),[m,o]),(0,l.useEffect)((()=>{p(a||""),a||g(null)}),[a]),(0,l.useEffect)((()=>(c?document.addEventListener("mousedown",E):document.removeEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)})),[c]),l.createElement("div",{className:r.autoCompleteWrapper,ref:s},l.createElement("label",{htmlFor:t},n),l.createElement("input",{id:t,type:"text",placeholder:"Type to search",className:r.input,value:m,onChange:e=>{p(e.target.value),u(!0)},onFocus:()=>{u(!0)}}),c&&l.createElement(l.Fragment,null,0===v.length?l.createElement("ul",{className:r.optionsList},l.createElement("li",{className:r.noOptionsListItem},"No matches")):l.createElement("ul",{className:r.optionsList},v.map((e=>l.createElement("li",{key:e.value,role:"option","aria-selected":m===e.label,className:r.optionsListItem,onClick:()=>{return p((t=e).label),g(t),u(!1),h([]),void i(t);var t}},e.label))))))},m=(0,o.QM)({radioWrapper:{display:"flex",gap:"1rem"},vehiclesBox:{margin:"1rem 0.5rem 2rem",padding:"1rem",border:"1px solid var(--primary-color)",borderRadius:"2rem",position:"relative","&::before":{border:"1rem solid var(--primary-color)",content:'" "',position:"absolute",top:"-2rem",left:"8rem",borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent"}},disabledLabel:{color:"lightgray"}}),p=e=>{const{destinationType:t,planetOptions:n,vehicleOptions:o,selectedPlanetValue:i,vehicleSelection:r,onPlanetSelect:s,onVehicleChange:c}=e,d=m(),{id:p,text:v}=(e=>{switch(e){case a.Destination1:return{id:"destination1",text:"Destination 1"};case a.Destination2:return{id:"destination2",text:"Destination 2"};case a.Destination3:return{id:"destination3",text:"Destination 3"};case a.Destination4:return{id:"destination4",text:"Destination 4"};default:return{id:"NEVER",text:"NEVER"}}})(t);return l.createElement(l.Fragment,null,l.createElement(u,{id:`${p}-select`,labelText:v,inputValueProp:i,options:n,onSelect:s}),i&&l.createElement("div",{className:d.vehiclesBox},o.map((e=>l.createElement("div",{key:e.value,className:d.radioWrapper},l.createElement("input",{type:"radio",id:`${p}-radio-${e.value}`,name:`${p}-vehicle-radio`,value:e.value,disabled:!e.isSelectable,checked:r.get(t)===e.value,onChange:()=>c(e)}),l.createElement("label",{htmlFor:`${p}-radio-${e.value}`,className:e.isSelectable?"":d.disabledLabel},e.name," (",e.total_no-((e,t)=>[...t.values()].reduce(((t,n)=>n===e?t+1:t),0))(e.value,r),")"))))))},v=(0,o.QM)({timeTaken:{marginTop:"3rem"},findButtonWrapper:{textAlign:"center",marginTop:"5rem"}}),h=e=>{const{loading:t,planetOptions:n,vehicleOptions:o,planetSelection:d,vehicleSelection:u,updatePlanetSelection:m,updateVehicleSelection:h,findFalcone:b}=e,g=v(),[E,f]=(0,l.useState)(n);(0,l.useEffect)((()=>{const e=new Set(d.values());f(n.filter((t=>!e.has(t.value))))}),[d]);const S=s(n,"value"),x=s(o,"value"),C=(e=>t=>{const{vehicleOption:n,destinationType:a,planetSelection:l,vehicleSelection:o}=t,i=l.get(a);if(i&&e[i].distance>n.max_distance)return!1;let r=0;return[...o.values()].forEach((e=>{e===n.value&&(r+=1)})),!(r>=n.total_no)})(S);return l.createElement(l.Fragment,null,l.createElement("div",{className:"row"},Object.values(a).map((e=>l.createElement("div",{key:e,className:"column"},l.createElement(p,{destinationType:e,planetOptions:E,vehicleOptions:o.map((t=>({...t,isSelectable:C({vehicleOption:t,destinationType:e,planetSelection:d,vehicleSelection:u})}))),selectedPlanetValue:d.get(e),vehicleSelection:u,onPlanetSelect:t=>{m(i(d,e,t.value)),h(((e,t)=>{const n=new Map(e);return n.delete(t),n})(u,e))},onVehicleChange:t=>h(i(u,e,t.value))})))),l.createElement("div",{className:"column"},l.createElement("h3",{className:g.timeTaken},"Time taken: ",((e,t,n,a)=>[...e.entries()].reduce(((e,[l,o])=>{const i=n[o].distance,r=t.get(l);return i&&r?e+i/a[r].speed:e}),0))(d,u,S,x)))),l.createElement("div",{className:g.findButtonWrapper},l.createElement("button",{disabled:!r(d,u),onClick:()=>b({planet_names:[...d.values()],vehicle_names:[...u.values()].map((e=>x[e].name))})},"Find Falcone!")),t&&l.createElement(c.Z,{loadingText:"Searching..."}))}}}]);